/* ========================================
   RESPONSIVE BASE STABILIZATION LAYER
   MOBILE-FIRST FOUNDATION (loaded first)
   Structure-based, no padding hacks
   ======================================== */

/* ============================= */
/* 1Ô∏è‚É£ GLOBAL RESET - BOX SIZING */
/* ============================= */

*, *::before, *::after {
  box-sizing: border-box;
}

html {
  font-size: 16px;
  -webkit-text-size-adjust: 100%;
  -webkit-tap-highlight-color: transparent;
}

body {
  margin: 0;
  min-width: 320px;
  overflow-x: hidden;
  min-height: 100dvh; /* Use dvh instead of vh for mobile */
}

/* Prevent mobile font scaling chaos */
button, input, textarea, select {
  font-family: inherit;
  font-size: 1rem;
}

/* ============================= */
/* 2Ô∏è‚É£ CONTAINER WIDTH NORMALIZATION */
/* Now uses CSS variables from layout.css */
/* ============================= */

/*
 * NOTE: .page-container width and padding are controlled by:
 * - --page-max-width (responsive: 100% ‚Üí 960px ‚Üí 1200px)
 * - --page-padding (responsive: 12px ‚Üí 24px ‚Üí 32px)
 * See: src/styles/layout.css
 * See: src/layouts/PageContainer.css
 *
 * These generic containers use the same system:
 */

.app-container {
  width: 100%;
  min-width: 320px;
}

.container,
.page,
.main-content {
  width: 100%;
  max-width: var(--page-max-width, 100%);
  margin-inline: auto;
  padding-inline: var(--page-padding, 12px);
}

/* .page-container is fully controlled by PageContainer.css - don't override here */

/* ============================= */
/* 3Ô∏è‚É£ HEADER / ROW LAYOUT FIX */
/* ============================= */

.header-row,
.message-header,
.profile-header-row {
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 0;
}

.header-title,
.message-title {
  flex: 1;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.header-actions,
.message-actions {
  display: flex;
  gap: 8px;
  flex-shrink: 0;
}

/* PostHeader (.post-header, .post-header-actions, .author-name) removed -
   now handled by PostHeader.isolated.css with fb-* classes */

/* ============================= */
/* 4Ô∏è‚É£ INPUTS & COMPOSERS */
/* ============================= */

.composer,
.message-composer,
.post-composer,
.comment-composer,
.reply-composer {
  display: flex;
  align-items: flex-end;
  gap: 8px;
}

.composer-input,
.message-input,
.post-input,
.comment-input,
.reply-input {
  flex: 1;
  min-width: 0;
  resize: none;
  line-height: 1.4;
}

.composer-actions,
.message-actions-row {
  flex-shrink: 0;
  display: flex;
  gap: 6px;
}

/* ============================= */
/* 5Ô∏è‚É£ LAYOUT - MOBILE-FIRST FLEX ‚Üí GRID */
/* ============================= */

.layout,
.two-column,
.three-column,
.profile-layout,
.feed-layout,
.messages-layout {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

@media (min-width: 1024px) {
  .layout,
  .feed-layout {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 24px;
  }

  .profile-layout {
    display: grid;
    grid-template-columns: 1fr 300px;
    gap: 24px;
  }

  .messages-layout {
    display: grid;
    grid-template-columns: 320px 1fr;
    gap: 0;
  }
}

/* Sidebars move below content on mobile */
.sidebar,
.right-column,
.left-column {
  width: 100%;
  max-width: 100%;
}

@media (max-width: 1023px) {
  .sidebar,
  .right-column,
  .left-column {
    order: 2;
  }

  .main,
  .content,
  .feed {
    order: 1;
  }
}

/* ============================= */
/* 6Ô∏è‚É£ CARD NORMALIZATION */
/* ============================= */

.card,
.surface,
.panel,
.post-card {
  width: 100%;
  max-width: 100%;
  min-width: 0;
}

/* ============================= */
/* 7Ô∏è‚É£ FLEX & GRID SAFETY */
/* ============================= */

.flex,
.flex-row,
.grid,
[class*="flex"],
[class*="grid"] {
  min-width: 0;
}

/* Prevent text overflow */
p, h1, h2, h3, h4, h5, h6, span {
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* ============================= */
/* 8Ô∏è‚É£ PWA SAFE AREAS */
/* ============================= */

.safe-area {
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* Apply to critical elements */
.mobile-nav,
.bottom-nav,
.message-composer,
.action-bar {
  padding-bottom: env(safe-area-inset-bottom);
}

/* ============================= */
/* 9Ô∏è‚É£ MEDIA STABILIZATION */
/* ============================= */

img,
video {
  max-width: 100%;
  height: auto;
  border-radius: inherit;
}

/* ============================= */
/* üö´ ANTI-PATTERN OVERRIDES */
/* Remove dangerous width/height values */
/* ============================= */

/* Never use 100vw - causes PWA overflow */
/* Never use 100vh - causes mobile viewport bugs */
/* Use 100% and 100dvh instead */

