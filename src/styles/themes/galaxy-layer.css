/* ================================
   GALAXY BACKGROUND LAYER
   Isolated â€” No Token Overrides
   Uses data-galaxy="true" on <html>
   data-theme stays light/dark always

   Must override:
   - index.html inline critical CSS
   - purple-identity.css !important
================================= */

/* Galaxy background on html (wins over inline critical CSS) */
html[data-galaxy="true"] {
  background:
    radial-gradient(
      ellipse at 50% 20%,
      rgba(90, 70, 140, 0.25),
      rgba(10, 10, 20, 0.95)
    ),
    url('/assets/midnight-sanctuary.webp') center/cover no-repeat fixed !important;
  background-color: transparent !important;
}

/* Force body and #root transparent so galaxy shows through */
html[data-galaxy="true"] body,
html[data-galaxy="true"] #root {
  background: transparent !important;
  background-color: transparent !important;
}

/* Subtle star depth */
html[data-galaxy="true"] body::before {
  content: "";
  position: fixed;
  inset: 0;
  background:
    radial-gradient(rgba(255,255,255,0.04) 1px, transparent 1px);
  background-size: 3px 3px;
  pointer-events: none;
  z-index: 0;
  opacity: 0.4;
}

/* Ensure layout layers sit above galaxy */
html[data-galaxy="true"] #root,
html[data-galaxy="true"] .app-layout,
html[data-galaxy="true"] .app-container,
html[data-galaxy="true"] .page-viewport,
html[data-galaxy="true"] .page-container,
html[data-galaxy="true"] .home-root {
  position: relative;
  z-index: 1;
}

/* Force all page-level wrappers transparent so galaxy shows through.
   .page-viewport owns background for all routed content (PageViewport.css).
   .app-container has background !important via purple-identity.css.
   Both must be overridden here with !important. */
html[data-galaxy="true"] .page-viewport,
html[data-galaxy="true"] .app-container,
html[data-galaxy="true"] .home-root,
html[data-galaxy="true"] .feed-container,
html[data-galaxy="true"] .notifications-page,
html[data-galaxy="true"] .events-page,
html[data-galaxy="true"] .lounge-page,
html[data-galaxy="true"] .photo-essay-page,
html[data-galaxy="true"] .search-page,
html[data-galaxy="true"] .messages-page {
  background: transparent !important;
  background-color: transparent !important;
}


/* ================================
   LIGHT MODE SPILL-THROUGH
   Only when galaxy + light theme
================================= */

html[data-galaxy="true"][data-theme="light"] {
  --surface-primary: rgba(255,255,255,0.92);
  --surface-secondary: rgba(255,255,255,0.85);
  --card-background: rgba(255,255,255,0.90);
  --modal-background: rgba(255,255,255,0.96);
  --navbar-background: rgba(255,255,255,0.92);
}

/* Blur for glass effect */
html[data-galaxy="true"] .card,
html[data-galaxy="true"] .feed-post,
html[data-galaxy="true"] .page-header,
html[data-galaxy="true"] .navbar,
html[data-galaxy="true"] .modal-content {
  backdrop-filter: blur(14px);
}


/* ================================
   QUIET MODE COMPATIBILITY
================================= */

/* Quiet Mode dims galaxy intensity */
html[data-galaxy="true"][data-quiet="true"] {
  background:
    radial-gradient(
      ellipse at 50% 20%,
      rgba(70, 60, 120, 0.18),
      rgba(8, 8, 15, 0.97)
    ),
    url('/assets/midnight-sanctuary.webp') center/cover no-repeat fixed !important;
}

/* Quiet Mode softens glow */
html[data-galaxy="true"][data-quiet="true"] body::before {
  opacity: 0.2;
}


/* ================================
   MOBILE SAFE GUARD
================================= */

@media (max-width: 768px) {
  html[data-galaxy="true"] {
    background-attachment: scroll !important;
  }
}

