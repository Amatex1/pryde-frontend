/**
 * PURPLE IDENTITY - Eliminate Grey SaaS Surfaces
 * 
 * Restore Pryde's purple identity across all breakpoints.
 * Enforce the one-surface rule: Page = Purple, Content = White
 * No third grey layer allowed.
 * 
 * PHASES:
 * A - Force Header to Purple (all breakpoints)
 * B - Kill Grey Surface Tokens (replace with var(--color-surface))
 * C - Make Polls Transparent (embedded in posts)
 * D - Add Comment Separation (clear visual hierarchy)
 * 
 * Target: "Warm, queer, calm — not corporate, not boxed."
 */

/* ════════════════════════════════════════
   PHASE A: FORCE HEADER TO PURPLE
   DARK MODE ONLY - Light mode uses light navbar
   ════════════════════════════════════════ */

/* Navbar: Purple background in DARK MODE only */
[data-theme="dark"] .navbar,
[data-theme="dark"] .app-header,
[data-theme="dark"] .top-nav,
[data-theme="dark"] .mobile-header {
  background: var(--color-brand-bg) !important;
  border: none !important;
  box-shadow: none !important;
  color: white !important;
}

/* Navbar text and icons: White on purple - DARK MODE ONLY */
/* EXCLUDES dropdown menus which have their own surface background */
[data-theme="dark"] .navbar *:not(.profile-dropdown):not(.profile-dropdown *):not(.dropdown-menu):not(.dropdown-menu *):not(.notification-dropdown):not(.notification-dropdown *):not(.messages-dropdown):not(.messages-dropdown *):not(.search-results-dropdown):not(.search-results-dropdown *),
[data-theme="dark"] .navbar a:not(.dropdown-item),
[data-theme="dark"] .navbar button:not(.dropdown-item),
[data-theme="dark"] .navbar-item,
[data-theme="dark"] .nav-link,
[data-theme="dark"] .navbar-link,
[data-theme="dark"] .navbar-btn {
  color: white !important;
}

/* Dropdown menus inside navbar: Use proper text colors */
[data-theme="dark"] .navbar .profile-dropdown,
[data-theme="dark"] .navbar .dropdown-menu,
[data-theme="dark"] .navbar .notification-dropdown,
[data-theme="dark"] .navbar .messages-dropdown,
[data-theme="dark"] .navbar .search-results-dropdown {
  color: var(--color-text) !important;
}

[data-theme="dark"] .navbar .profile-dropdown *,
[data-theme="dark"] .navbar .dropdown-menu *,
[data-theme="dark"] .navbar .notification-dropdown *,
[data-theme="dark"] .navbar .messages-dropdown *,
[data-theme="dark"] .navbar .search-results-dropdown * {
  color: inherit;
}

[data-theme="dark"] .navbar .dropdown-item {
  color: var(--color-text) !important;
}

[data-theme="dark"] .navbar .dropdown-item:hover {
  color: var(--color-brand) !important;
}

/* Navbar search: Transparent with white border - DARK MODE ONLY */
[data-theme="dark"] .navbar-search,
[data-theme="dark"] .search-bar {
  background: rgba(255, 255, 255, 0.1) !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  color: white !important;
}

[data-theme="dark"] .navbar-search::placeholder,
[data-theme="dark"] .search-bar::placeholder {
  color: rgba(255, 255, 255, 0.6) !important;
}

/* Active nav items: White background - DARK MODE ONLY */
[data-theme="dark"] .navbar-item.active,
[data-theme="dark"] .nav-link.active,
[data-theme="dark"] .navbar-link.active {
  background: rgba(255, 255, 255, 0.2) !important;
  color: white !important;
}

/* ════════════════════════════════════════
   LIGHT MODE NAVBAR - Clean, readable text
   ════════════════════════════════════════ */

[data-theme="light"] .navbar,
[data-theme="light"] .app-header,
[data-theme="light"] .top-nav {
  background: var(--color-surface, #FFFFFF) !important;
  border-bottom: 1px solid var(--color-border, #E5E7EB) !important;
  color: var(--color-text, #1E1E26) !important;
}

/* Light mode navbar text: Dark colors for readability */
[data-theme="light"] .navbar .user-name,
[data-theme="light"] .navbar .nav-label,
[data-theme="light"] .navbar .nav-text,
[data-theme="light"] .user-profile-trigger .user-name {
  color: #1E1E26 !important;
}

[data-theme="light"] .navbar .dropdown-arrow,
[data-theme="light"] .user-profile-trigger .dropdown-arrow {
  color: #6B6E80 !important;
}

[data-theme="light"] .navbar .nav-link,
[data-theme="light"] .navbar .nav-button,
[data-theme="light"] .nav-link,
[data-theme="light"] .navbar-link,
[data-theme="light"] .navbar-btn,
[data-theme="light"] .navbar-item {
  color: #6B6E80 !important;
}

[data-theme="light"] .navbar .nav-link:hover,
[data-theme="light"] .navbar .nav-button:hover,
[data-theme="light"] .nav-link:hover,
[data-theme="light"] .navbar-link:hover,
[data-theme="light"] .navbar-item:hover {
  color: var(--color-brand) !important;
  background: var(--bg-hover, rgba(108, 92, 231, 0.08)) !important;
}

[data-theme="light"] .nav-link.active,
[data-theme="light"] .navbar-link.active,
[data-theme="light"] .navbar-item.active {
  background: var(--accent-muted, var(--color-brand-muted)) !important;
  color: var(--color-brand) !important;
}

/* Light mode search bar */
[data-theme="light"] .navbar-search,
[data-theme="light"] .search-bar {
  background: var(--color-surface-muted, #F5F5F5) !important;
  border: 1px solid var(--color-border, #E5E7EB) !important;
  color: var(--color-text, #1E1E26) !important;
}

[data-theme="light"] .navbar-search::placeholder,
[data-theme="light"] .search-bar::placeholder {
  color: var(--text-muted, #9CA0B3) !important;
}

/* ════════════════════════════════════════
   PHASE B: KILL GREY SURFACE TOKENS
   Only two surfaces: Page (purple) and Content (white)
   ════════════════════════════════════════ */

/* Replace all grey backgrounds with white */
.feed-container,
.message-container,
.poll-container,
.sidebar-card,
.create-post,
.composer-container {
  background: var(--color-surface) !important;
}

/* Kill grey hover states - DARK MODE ONLY */
[data-theme="dark"] .navbar-item:hover,
[data-theme="dark"] .nav-link:hover,
[data-theme="dark"] .navbar-link:hover {
  background: rgba(255, 255, 255, 0.15) !important;
}

/* ════════════════════════════════════════
   PHASE C: POST, COMPOSER, POLLS, COMMENTS
   All use var(--color-surface) + var(--border-post)
   No other backgrounds allowed
   ════════════════════════════════════════ */

/* Posts: One surface color */
.post-card,
.feed-post,
.post-container {
  background: var(--color-surface) !important;
  border: 1px solid var(--border-post, var(--border-default)) !important;
}

/* Composer: Match posts exactly */
.composer-container,
.create-post,
.post-composer {
  background: var(--color-surface) !important;
  border: 1px solid var(--border-post, var(--border-default)) !important;
}

/* Remove any hardcoded backgrounds */
.post-card,
.feed-post,
.composer-container,
.create-post {
  /* Kill hardcoded colors */
  background-color: var(--color-surface) !important;
}

/* ════════════════════════════════════════
   PHASE D: POLL NORMALIZATION
   Transparent container, subtle options
   ════════════════════════════════════════ */

.poll-container {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  padding: 12px 0 !important;
  margin: 12px 0 !important;
}

.poll-option-button,
.poll-option-result {
  background: rgba(108, 92, 231, 0.04) !important;
  border: 1px solid var(--color-brand-muted) !important;
  box-shadow: none !important;
}

.poll-option-button:hover:not(:disabled) {
  background: rgba(108, 92, 231, 0.08) !important;
  border-color: var(--color-brand) !important;
  transform: none !important;
}

.poll-option-result.selected {
  background: rgba(108, 92, 231, 0.12) !important;
  border-color: var(--color-brand) !important;
}

/* Poll bar: Brand-tinted */
.poll-option-bar {
  background: linear-gradient(90deg, var(--color-brand), var(--color-brand-light)) !important;
  opacity: 0.15 !important;
}

/* ════════════════════════════════════════
   PHASE E: COMMENT SEPARATION
   Divider between post body and comments
   ════════════════════════════════════════ */

/* Divider between post content and comments */
.comments-section,
.post-comments {
  border-top: 1px solid rgba(255, 255, 255, 0.06) !important;
  margin-top: 16px !important;
  padding-top: 16px !important;
}

[data-theme="dark"] .comments-section,
[data-theme="dark"] .post-comments {
  border-top-color: rgba(255, 255, 255, 0.06) !important;
}

/* Comment input: Subtle border, no background panel */
.comment-input-box,
.reply-input-box {
  background: transparent !important;
  border: 1px solid var(--border-post) !important;
  border-radius: 12px !important;
  padding: 12px !important;
}

/* Comment input field */
.comment-input,
.reply-input {
  background: var(--color-surface) !important;
  border: 1px solid rgba(0, 0, 0, 0.08) !important;
  border-radius: 10px !important;
}

[data-theme="dark"] .comment-input,
[data-theme="dark"] .reply-input {
  border-color: rgba(255, 255, 255, 0.08) !important;
}

/* Replies: No background boxes, spacing only */
.comment-replies,
.comment.reply {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* ════════════════════════════════════════
   DESKTOP OVERRIDES
   Ensure purple header on desktop too
   ════════════════════════════════════════ */

@media (min-width: 769px) {
  .navbar,
  .app-header {
    background: var(--color-brand-bg) !important;
    border-bottom: none !important;
  }

  /* Desktop nav items */
  .navbar-actions a,
  .navbar-actions button {
    color: white !important;
  }

  /* Desktop search */
  .navbar-search {
    background: rgba(255, 255, 255, 0.1) !important;
    border-color: rgba(255, 255, 255, 0.2) !important;
  }
}

/* ════════════════════════════════════════
   MOBILE SPECIFIC
   Ensure consistency on mobile
   ════════════════════════════════════════ */

@media (max-width: 768px) {
  /* Mobile nav bar */
  .mobile-nav {
    background: var(--color-brand-bg) !important;
    border-top: none !important;
  }

  .mobile-nav a {
    color: rgba(255, 255, 255, 0.7) !important;
  }

  .mobile-nav a.active {
    color: white !important;
  }

  /* Mobile comment input - not fixed position */
  .reply-input-box:not(.mobile-fixed) {
    position: relative !important;
    bottom: auto !important;
    left: auto !important;
    right: auto !important;
  }
}

/* ════════════════════════════════════════
   TEXT ON BRAND COLOR
   Ensure readability on purple
   ════════════════════════════════════════ */

.navbar .user-profile-trigger,
.navbar .notification-icon,
.navbar .nav-icon {
  color: white !important;
  border-color: rgba(255, 255, 255, 0.2) !important;
}

.navbar .notification-badge,
.navbar .nav-badge {
  background: white !important;
  color: var(--color-brand-bg) !important;
}

/* ════════════════════════════════════════
   PHASE F: KILL HARDCODED GREYS
   Replace all with tokens
   ════════════════════════════════════════ */

/* Kill inline grey backgrounds */
*[style*="#f0f0f0"],
*[style*="#eaeaea"],
*[style*="#ddd"],
*[style*="#e0e0e0"],
*[style*="#f5f5f5"],
*[style*="rgb(240, 240, 240)"],
*[style*="rgb(234, 234, 234)"],
*[style*="rgba(240"] {
  background: var(--color-surface) !important;
}

/* Kill hardcoded white backgrounds (except buttons) */
*[style*="background: white"]:not(button):not(.btn),
*[style*="background: #fff"]:not(button):not(.btn),
*[style*="background: #ffffff"]:not(button):not(.btn) {
  background: var(--color-surface) !important;
}

/* ════════════════════════════════════════
   PHASE G: VALIDATION
   Target: "Purple world, soft surfaces, calm reading"
   ════════════════════════════════════════ */

/* Ensure page background is always purple */
body,
html,
#root,
.app-container {
  background: var(--color-background) !important;
}

/* Ensure all content surfaces are white (light) or dark (dark mode) */
[data-theme="light"] .post-card,
[data-theme="light"] .composer-container,
[data-theme="light"] .feed-container {
  background: var(--color-surface) !important;
}

[data-theme="dark"] .post-card,
[data-theme="dark"] .composer-container,
[data-theme="dark"] .feed-container {
  background: var(--color-surface) !important;
}


