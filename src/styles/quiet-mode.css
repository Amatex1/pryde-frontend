/* ========================================
   QUIET MODE - SUPPLEMENTAL STYLES
   Phase 5C: Enhanced for accessibility
   Main variables are defined in variables.css
   This file handles transitions and special cases
   ======================================== */

/* ========================================
   SMOOTH TRANSITIONS
   Animate theme changes for pleasant UX
   ======================================== */

html {
  transition: background-color 0.3s ease-in-out;
}

/* Apply transition to common elements when quiet mode toggles */
[data-quiet="true"] *,
[data-quiet-mode="true"] * {
  transition:
    background-color 0.3s ease-in-out,
    color 0.3s ease-in-out,
    border-color 0.3s ease-in-out,
    box-shadow 0.3s ease-in-out;
}

/* ========================================
   QUIET MODE: REDUCED MOTION
   Disable non-essential animations
   ======================================== */

[data-quiet="true"],
[data-quiet-mode="true"] {
  /* Reduce animation speed globally */
  --animation-duration: 0.1s;
  --transition-duration: 0.1s;
}

/* Disable decorative animations in Quiet Mode */
[data-quiet="true"] .animated,
[data-quiet="true"] .pulse,
[data-quiet="true"] .bounce,
[data-quiet="true"] .shake,
[data-quiet-mode="true"] .animated,
[data-quiet-mode="true"] .pulse,
[data-quiet-mode="true"] .bounce,
[data-quiet-mode="true"] .shake {
  animation: none !important;
}

/* Reduce hover effects */
[data-quiet="true"] button:hover,
[data-quiet="true"] a:hover,
[data-quiet-mode="true"] button:hover,
[data-quiet-mode="true"] a:hover {
  transform: none;
}

/* Calm button states - no scale transforms */
[data-quiet="true"] .btn-join:hover,
[data-quiet="true"] .btn-leave:hover,
[data-quiet="true"] .join-btn:hover,
[data-quiet-mode="true"] .btn-join:hover,
[data-quiet-mode="true"] .btn-leave:hover,
[data-quiet-mode="true"] .join-btn:hover {
  transform: none;
  box-shadow: none;
}

/* ========================================
   QUIET MODE: SUBTLE FOCUS STATES
   Reduced emphasis for calm browsing
   ======================================== */

[data-quiet="true"] :focus-visible,
[data-quiet-mode="true"] :focus-visible {
  outline-width: 1px;
  outline-offset: 1px;
  box-shadow: none;
}

/* ========================================
   QUIET MODE: NO SURPRISE UI CHANGES
   Predictable, calm interface
   ======================================== */

/* Don't animate notification badges */
[data-quiet="true"] .notification-badge,
[data-quiet="true"] .unread-badge,
[data-quiet-mode="true"] .notification-badge,
[data-quiet-mode="true"] .unread-badge {
  animation: none;
}

/* Softer toast notifications */
[data-quiet="true"] .toast,
[data-quiet-mode="true"] .toast {
  animation: none;
  opacity: 0.9;
}

/* ========================================
   PREFERS-REDUCED-MOTION SYNC
   Honor system preference
   ======================================== */

@media (prefers-reduced-motion: reduce) {
  [data-quiet="true"],
  [data-quiet-mode="true"] {
    /* Already reduced, ensure it stays that way */
  }

  /* Force reduced motion for all users who prefer it */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ==================================================
   TABLET POLISH PASS (768px–1023px)
   ================================================== */

@media (min-width: 768px) and (max-width: 1023px) {

  /* Global spacing rhythm */
  .container,
  .page,
  .layout {
    padding-left: 20px;
    padding-right: 20px;
  }

  /* Cards & surfaces */
  .card,
  .panel,
  .surface {
    border-radius: 14px;
    box-shadow: none;
    border: 1px solid rgba(255,255,255,0.06);
  }

  /* Messages */
  .messages-layout {
    gap: 16px;
  }

  .message-bubble {
    max-width: 82%;
    padding: 10px 14px;
    border-radius: 16px;
  }

  /* Groups */
  .group-card {
    padding: 16px;
  }

  /* Profile header */
  .profile-header {
    padding: 20px;
  }

  .profile-avatar {
    width: 88px;
    height: 88px;
  }
}

/* ==================================================
   QUIET MODE — DESIGN PERSONALITY CONTRACT
   Core philosophy: less chrome, more content
   ================================================== */

[data-quiet="true"],
[data-quiet-mode="true"] {
  --quiet-bg: #0f1220;
  --quiet-surface: #15182b;
  --quiet-border: rgba(255,255,255,0.05);
  --quiet-text-primary: rgba(255,255,255,0.92);
  --quiet-text-secondary: rgba(255,255,255,0.62);
  --quiet-accent: rgba(120,140,255,0.55);
}

/* Background override */
[data-quiet="true"],
[data-quiet-mode="true"] {
  background-color: var(--quiet-bg);
  color: var(--quiet-text-primary);
}

/* Surfaces */
[data-quiet="true"] .card,
[data-quiet="true"] .panel,
[data-quiet="true"] .surface,
[data-quiet-mode="true"] .card,
[data-quiet-mode="true"] .panel,
[data-quiet-mode="true"] .surface {
  background: var(--quiet-surface);
  border: 1px solid var(--quiet-border);
  box-shadow: none;
}

/* Text hierarchy */
[data-quiet="true"] h1,
[data-quiet="true"] h2,
[data-quiet="true"] h3,
[data-quiet-mode="true"] h1,
[data-quiet-mode="true"] h2,
[data-quiet-mode="true"] h3 {
  color: var(--quiet-text-primary);
}

[data-quiet="true"] .meta,
[data-quiet="true"] .timestamp,
[data-quiet="true"] .secondary-text,
[data-quiet-mode="true"] .meta,
[data-quiet-mode="true"] .timestamp,
[data-quiet-mode="true"] .secondary-text {
  color: var(--quiet-text-secondary);
}

/* Buttons & actions */
[data-quiet="true"] button,
[data-quiet="true"] .btn,
[data-quiet-mode="true"] button,
[data-quiet-mode="true"] .btn {
  background: transparent;
  border: 1px solid var(--quiet-border);
  color: var(--quiet-text-primary);
}

[data-quiet="true"] button.primary,
[data-quiet="true"] .btn-primary,
[data-quiet-mode="true"] button.primary,
[data-quiet-mode="true"] .btn-primary {
  background: var(--quiet-accent);
  color: #fff;
  border: none;
}

/* Navbar in Quiet Mode */
[data-quiet="true"] .navbar,
[data-quiet-mode="true"] .navbar {
  background: rgba(10,12,24,0.92);
  border-bottom: 1px solid var(--quiet-border);
}

/* Messages in Quiet Mode */
[data-quiet="true"] .message-bubble,
[data-quiet-mode="true"] .message-bubble {
  background: rgba(255,255,255,0.04);
}

[data-quiet="true"] .message-bubble.own,
[data-quiet-mode="true"] .message-bubble.own {
  background: rgba(120,140,255,0.22);
}

/* Groups */
[data-quiet="true"] .group-card:hover,
[data-quiet-mode="true"] .group-card:hover {
  box-shadow: none;
  transform: none;
}

/* Profile header */
[data-quiet="true"] .profile-header,
[data-quiet-mode="true"] .profile-header {
  background: linear-gradient(
    180deg,
    rgba(255,255,255,0.04),
    rgba(255,255,255,0)
  );
}
